# =============================================================================
# CRM-AI Pro Environment Configuration Template
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to version control
# Last Updated: 2025-11-25
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Get these from: https://supabase.com/dashboard/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# -----------------------------------------------------------------------------
# LLM Router - OpenAI (REQUIRED for LLM Router)
# -----------------------------------------------------------------------------
# Get from: https://platform.openai.com/api-keys
# Format: sk-proj-... or sk-...
# Used for: GPT-4o, GPT-4o-mini (default provider)
OPENAI_API_KEY=sk-proj-your-openai-key-here

# -----------------------------------------------------------------------------
# LLM Router - Anthropic (REQUIRED for LLM Router)
# -----------------------------------------------------------------------------
# Get from: https://console.anthropic.com/settings/keys
# Format: sk-ant-api03-...
# Used for: Claude Sonnet 3.5 (complex tasks), Claude Haiku 4.5 (fast drafts)
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# -----------------------------------------------------------------------------
# LLM Router - Security & Encryption (REQUIRED for Database Key Encryption)
# -----------------------------------------------------------------------------
# Encryption password for securing API keys stored in the database
# IMPORTANT: Generate a strong random password (32+ characters)
# This is used by lib/llm/security/key-manager.ts for pgcrypto encryption
# Keep this secret and back it up securely!
#
# Generate a secure key with: openssl rand -base64 32
# Or use a password manager to generate a 32+ character password
#
# WARNING: If you lose this key, you will NOT be able to decrypt existing
# API keys stored in the database. Back it up in a secure location!
POSTGRES_ENCRYPTION_KEY=your-secure-encryption-password-here

# -----------------------------------------------------------------------------
# Server Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Base URL for API calls and redirects
# Development: http://localhost:3002
# Production: https://your-domain.com
NEXT_PUBLIC_BASE_URL=http://localhost:3002

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable LLM Router (set to 'false' to disable intelligent routing)
USE_LLM_ROUTER=true

# Enable individual LLM providers
LLM_ENABLED=true
LLM_OPENAI_ENABLED=true
LLM_ANTHROPIC_ENABLED=true

# -----------------------------------------------------------------------------
# Email Configuration (Resend) (REQUIRED)
# -----------------------------------------------------------------------------
# Get from: https://resend.com/api-keys
# Format: re_xxxxxxxx
# Used for: Transactional emails, notifications
RESEND_API_KEY=re_your-resend-key-here

# Optional: Webhook secret for verifying Resend webhooks
# Generate a secure key: openssl rand -base64 32
RESEND_WEBHOOK_SECRET=your-webhook-secret-here

# Optional: Cron job secret for queue processor
# Generate a secure key: openssl rand -base64 32
CRON_SECRET=your-cron-secret-here

# Optional: Verified domain for sending emails
# Get from: https://resend.com/domains
# Can be a full email address or just the domain
# Examples: "noreply@317plumber.com" or "317plumber.com"
RESEND_VERIFIED_DOMAIN=317plumber.com

# Optional: Test email address for setup verification
TEST_EMAIL=your-email@example.com

# -----------------------------------------------------------------------------
# Payment Processing (OPTIONAL - for invoicing)
# -----------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/apikeys
# Used for: Payment processing, invoice payments
STRIPE_SECRET_KEY=sk_test_your-stripe-key-here

# -----------------------------------------------------------------------------
# Additional LLM Providers (OPTIONAL - Future Support)
# -----------------------------------------------------------------------------
# These are not yet fully integrated but can be configured

# Google Gemini (Future)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_GEMINI_API_KEY=your-gemini-key-here

# Zai GLM (Future)
ZAI_GLM_API_KEY=your-glm-key-here

# -----------------------------------------------------------------------------
# Google Gmail OAuth Integration (OPTIONAL - for Gmail sending)
# -----------------------------------------------------------------------------
# Get from: https://console.cloud.google.com/apis/credentials
# Create OAuth 2.0 Client ID for Web application
# Used for: Gmail API access, sending emails via Gmail
GOOGLE_CLIENT_ID=your-google-client-id-here
GOOGLE_CLIENT_SECRET=your-google-client-secret-here
GOOGLE_REDIRECT_URI=http://localhost:3000/api/integrations/gmail/callback

# -----------------------------------------------------------------------------
# Microsoft 365 OAuth Integration (OPTIONAL - for Outlook/Microsoft 365 email)
# -----------------------------------------------------------------------------
# Get from: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 1. Go to Azure Portal > App registrations > New registration
# 2. Set "Redirect URI" to: http://localhost:3000/api/integrations/microsoft/callback
# 3. Under "Authentication", enable "Allow public client flows"
# 4. Under "API permissions", add Microsoft Graph permissions:
#    - Mail.Read (Read user mail)
#    - Mail.Send (Send mail as user)
#    - User.Read (Sign in and read user profile)
#    - User.ReadBasic.All (Read all users' basic profiles)
#    - Contacts.Read (Read user contacts)
#    - offline_access (Maintain access to data)
# Used for: Microsoft Graph API access, Outlook/Exchange email integration
MICROSOFT_CLIENT_ID=your-microsoft-app-id-here
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret-here
MICROSOFT_TENANT_ID=common  # Use 'common' for multi-tenant, or your tenant ID for single-tenant
MICROSOFT_REDIRECT_URI=http://localhost:3000/api/integrations/microsoft/callback

# -----------------------------------------------------------------------------
# Voice Agent Configuration (OPTIONAL)
# -----------------------------------------------------------------------------
# Voice agents are completely optional and can be disabled to reduce bundle size
# Default is disabled - set NEXT_PUBLIC_ENABLE_VOICE_AGENT=true to enable

# Master switch for voice functionality (default: false)
NEXT_PUBLIC_ENABLE_VOICE_AGENT=false

# Voice provider selection (only used when voice is enabled)
# Options: "elevenlabs" or "google"
NEXT_PUBLIC_VOICE_PROVIDER=elevenlabs

# ElevenLabs Configuration (required when provider is "elevenlabs")
# Get from: https://elevenlabs.io/app/settings/api-keys
# Format: sk_xxxxxxxx...
ELEVENLABS_API_KEY=sk_your-elevenlabs-key-here

# ElevenLabs Agent ID (optional - will use default if not provided)
# Get from: https://elevenlabs.io/app/convai/agents
# Format: agent_xxxxxxxx...
ELEVENLABS_AGENT_ID=agent_6501katrbe2re0c834kfes3hvk2d

# Google Gemini Configuration (required when provider is "google")
# Get from: https://makersuite.google.com/app/apikey
# Format: AIzaSy...
GOOGLE_GEMINI_API_KEY=your-gemini-key-here
GOOGLE_GEMINI_MODEL=gemini-2.0-flash-exp

# Voice Feature Flags (optional - for granular control)
# These are all enabled by default when voice is enabled

# Enable voice navigation commands (default: true)
NEXT_PUBLIC_ENABLE_VOICE_NAVIGATION=true

# Enable voice-triggered UI actions (default: true)
NEXT_PUBLIC_ENABLE_VOICE_UI_ACTIONS=true

# Enable voice transcription (default: false)
NEXT_PUBLIC_ENABLE_VOICE_TRANSCRIPTION=false

# Enable voice recording (default: false)
NEXT_PUBLIC_ENABLE_VOICE_RECORDING=false

# Development settings (default: false)
NEXT_PUBLIC_VOICE_DEBUG_MODE=false
NEXT_PUBLIC_VOICE_ENABLE_LOGGING=true

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
# Uncomment these for development purposes

# Disable SSL verification for local development (not recommended for production)
# NODE_TLS_REJECT_UNAUTHORIZED=0

# Enable debug logging
# DEBUG=true

# Next.js telemetry (set to 0 to disable)
# NEXT_TELEMETRY_DISABLED=1

# -----------------------------------------------------------------------------
# Production Settings (Vercel/Deployment)
# -----------------------------------------------------------------------------
# These are typically set in your deployment platform (e.g., Vercel Dashboard)
# DO NOT set these in .env.local for development

# NODE_ENV=production
# VERCEL_URL=your-app.vercel.app

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. This file is a template. Copy it to .env.local and add your real values.
# 2. Never commit .env.local to git (it's in .gitignore)
# 3. For Supabase Edge Functions, use: ./scripts/setup-supabase-secrets.sh
# 4. Validate your setup with: npm run validate-env
# 5. See docs/ENVIRONMENT_SETUP.md for detailed setup instructions
#
# Security Best Practices:
# - Rotate API keys every 90 days
# - Use separate keys for development and production
# - Store production keys in a secrets manager (AWS Secrets Manager, Vercel)
# - Back up POSTGRES_ENCRYPTION_KEY securely (you need it to decrypt DB keys)
# - Monitor API key usage for anomalies
#
# LLM Router Startup Validation:
# - The app will validate all required vars on startup (lib/llm/startup/validator.ts)
# - Missing or invalid keys will prevent the app from starting
# - At least ONE of OPENAI_API_KEY or ANTHROPIC_API_KEY is required
# - Check console output for detailed validation errors
# =============================================================================
